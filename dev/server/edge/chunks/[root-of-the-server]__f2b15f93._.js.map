{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport type { NextRequest } from \"next/server\"\n\n// Routes that don't require authentication\nconst publicRoutes = [\"/login\", \"/auth/callback\"]\n\nexport function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl\n\n  // Check if it's a public route\n  const isPublicRoute = publicRoutes.some((route) => pathname.startsWith(route))\n\n  // Get token from cookie or authorization header\n  const token = request.cookies.get(\"access_token\")?.value\n\n  // If trying to access protected route without token, redirect to login\n  if (!isPublicRoute && !token) {\n    // Check localStorage is not available in middleware, so we rely on cookie\n    // The client-side AuthProvider will handle localStorage\n    const loginUrl = new URL(\"/login\", request.url)\n    return NextResponse.redirect(loginUrl)\n  }\n\n  // If logged in and trying to access login page, redirect to dashboard\n  if (isPublicRoute && token && pathname === \"/login\") {\n    const dashboardUrl = new URL(\"/dashboard\", request.url)\n    return NextResponse.redirect(dashboardUrl)\n  }\n\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except for:\n     * - api (API routes)\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - public files (images, etc.)\n     */\n    \"/((?!api|_next/static|_next/image|favicon.ico|.*\\\\..*|icon-.*|apple-icon.*).*)\",\n  ],\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGA,2CAA2C;AAC3C,MAAM,eAAe;IAAC;IAAU;CAAiB;AAE1C,SAAS,WAAW,OAAoB;IAC7C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,+BAA+B;IAC/B,MAAM,gBAAgB,aAAa,IAAI,CAAC,CAAC,QAAU,SAAS,UAAU,CAAC;IAEvE,gDAAgD;IAChD,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,iBAAiB;IAEnD,uEAAuE;IACvE,IAAI,CAAC,iBAAiB,CAAC,OAAO;QAC5B,0EAA0E;QAC1E,wDAAwD;QACxD,MAAM,WAAW,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC9C,OAAO,gUAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,sEAAsE;IACtE,IAAI,iBAAiB,SAAS,aAAa,UAAU;QACnD,MAAM,eAAe,IAAI,IAAI,cAAc,QAAQ,GAAG;QACtD,OAAO,gUAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO,gUAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;;KAOC,GACD;KACD;AACH"}}]
}